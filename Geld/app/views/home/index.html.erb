<div class="user_page pb90">
<% if user_signed_in? %>
  <div id="container">
    <h2 class="pb40"> Hi
      <%= current_user.first_name %>!
      Please click this button to link your bank account!
    </h2>
    <button id="link-btn">Link Account</button>
    <h3 class="pt40"> For security reasons if you change pages you will need to re-login to your bank account!</h3>
  </div>

  <div id="app">
    <div class="row">
      <div class="col-md-12">
        <h2> Hi
          <%= current_user.first_name %>!
          Here is your bank info!
        </h2>
      </div>
    </div>
    <div class="row">
      <div class="col-md-4 border p10">
          <h3>Transactions</h3>
        <div id="get-transactions-data">
          <div class="inner" v-for="transaction in transactions">
            <strong> {{transaction.name}} </strong>
            <br>
                ${{transaction.amount}}
            <br>
            <em>{{transaction.date}}</em>
            <br>
            <em>{{transaction.category[0]}}</em>
          </div>
        </div>
      </div>
      <div class="col-md-8 ">
        <div class="row border-no-left">
          <canvas id="myCanvas" width="700" height="350"></canvas>
        </div>
        <div class="row">
          <div class="finCalc">
            <div>
              <button type="button" class="btn btn-geld" data-toggle="modal" data-target="#exampleModalLong">
                Savings Calc
              </button>
            </div>
            <div class="row">
              <div class="modal fade" id="exampleModalLong" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                      <h3 class="modal-title" id="exampleModalLongTitle">Use this calculator to save!</h3>
                    </div>
                    <div class="modal-body">
                      <div class="row">
                        <div class="col-md-6 text-left">
                          <h4> Money Spent: ${{totalSpent}} </h4>
                          <br>
                          <h4> Total Savings: ${{accountTotal}} </h4>
                          <br>
                        </div>
                        <div class="col-md-6">

                        </div>
                      </div>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary btn-geld" data-dismiss="modal">Close</button>
                    </div>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

<% else %>
  <div class="container-fluid home">
    <div class='row pt80'>
      <h2 class="container-fluid text-center"><strong>Welcome to the Geld Project</strong></h2>
    </div>
    <div class='row pt20 pb110'>
      <div class="col-md-4">
        <br>
        <br>
        <h3 >Make <strong>banking</strong>, <strong>saving</strong>, and <strong>spending</strong> a simpler process. To learn more, feel free to click on the button below.</h3>

        <h4><%= link_to('Learn More', about_path, class:'btn btn-primary') %></h4>
      </div>
      <div class='col-md-8'>
        <img src='/assets/Home_Iphone_pic.png' alt='Iphone' height='25%' width='25%'>
      </div>
    </div>
  </div>
    <div class='desktop-image'>
      <img src='/assets/Desktop_pic.jpg' alt='Desktop Screen'>
    </div>
<% end %>
</div>
<script>
    function showImages(el) {
        var windowHeight = jQuery( window ).height();
        $(el).each(function(){
            var thisPos = $(this).offset().top;

            var topOfWindow = $(window).scrollTop();
            if (topOfWindow + windowHeight - 200 > thisPos ) {
                $(this).addClass("fadeIn");
            }
        });
    }

    // if the image in the window of browser when the page is loaded, show that image
    $(document).ready(function(){
            showImages('.desktop-image');
    });

    // if the image in the window of browser when scrolling the page, show that image
    $(window).scroll(function() {
            showImages('.desktop-image');
    });
</script>

